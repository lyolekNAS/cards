<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head th:replace="~{fragments/navigation :: header('Слова')}"></head>
<body class="min-vh-100 d-flex justify-content-center align-items-center bg-light">

    <div class="container container-sm p-4 bg-white shadow-lg rounded-3 text-center my-4 flex-shrink-0">

        <div th:replace="~{fragments/navigation :: nav}"></div>

        <h3 class="mb-4 text-primary">Керування словником</h3>


        <!-- Пагінація -->
        <div class="d-flex justify-content-center mt-3">

            <nav>
                <ul class="pagination">

                    <!-- First -->
                    <li class="page-item" th:classappend="${words.first} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{/words(page=${words.first}, size=${words.size}, state=${param.state})}">
                            <i class="bi bi-chevron-double-left"></i>
                        </a>
                    </li>
                    <!-- Previous -->
                    <li class="page-item" th:classappend="${words.first} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{/words(page=${words.number - 1}, size=${words.size}, state=${param.state})}">
                            <i class="bi bi-chevron-compact-left"></i>
                        </a>
                    </li>

                    <!-- current -->
                    <li class="page-item active">
                        <a class="page-link"
                           th:text="${words.number + 1}"
                           th:href="@{/words(page=${words.number}, size=${words.size}, state=${param.state})}"></a>
                    </li>

                    <!-- Next -->
                    <li class="page-item" th:classappend="${words.last} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{/words(page=${words.number + 1}, size=${words.size}, state=${param.state})}">
                            <i class="bi bi-chevron-right"></i>
                        </a>
                    </li>
                    <!-- Last -->
                    <li class="page-item" th:classappend="${words.last} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{/words(page=${words.last}, size=${words.size}, state=${param.state})}">
                            <i class="bi bi-chevron-double-right"></i>
                        </a>
                    </li>

                </ul>
            </nav>

        </div>

        <form method="get" class="row g-2 mb-4 text-start">
            <div class="col-auto">
                <label for="stateFilter" class="col-form-label fw-bold">Фільтр за станом:</label>
            </div>

            <div class="col-auto">
                <select id="stateFilter" name="state" class="form-select"
                        onchange="this.form.submit()">
                    <option value="">— Усі —</option>

                    <option th:each="s : ${T(org.sav.fornas.cards.client.cardsback.model.WordDto.StateEnum).values()}"
                            th:value="${s.getValue()}"
                            th:text="${s}"
                            th:selected="${param.state != null and param.state[0] == s.getValue()}">
                    </option>
                </select>
            </div>
        </form>

        <div class="table-responsive">
            <table class="table table-hover table-sm text-start caption-top align-middle">

                <thead>
                <tr class="table-dark">
                    <th>ID</th>
                    <th>Англійське</th>
                    <th>Українське</th>
                    <th>Опис</th>
                    <th class="text-center">Стан</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="word : ${words.content}" th:object="${word}">

                    <td>
                        <a th:href="@{'/delete(id=*{id})}"
                           class="btn btn-sm btn-outline-danger"
                           title="Видалити слово"
                           onclick="return confirm('Ви впевнені, що хочете видалити слово?');">
                            <span th:text="*{id}"></span>
                        </a>
                    </td>

                    <td>
                        <a th:href="@{'/edit?w=' + *{english}}" class="fw-bold text-decoration-none">
                            <span th:text="*{english}"></span>
                        </a>
                    </td>

                    <td th:text="*{ukrainian}"></td>

                    <td class="text-truncate" style="max-width: 150px;" th:text="*{description}"></td>

                    <td class="text-center">
                        <span th:text="*{state}"class="badge bg-info"></span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="mt-4 d-grid gap-2">
            <a th:href="@{/add}" class="btn btn-primary btn-lg">
                <i class="bi bi-plus-circle-fill"></i> Додати нове слово
            </a>
        </div>

    </div>
</div>
</body>
</html>