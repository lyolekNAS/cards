<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/navigation :: header('Тренування')}"></head>

<body class="min-vh-100 d-flex justify-content-center align-items-center bg-light">

    <div class="container container-sm p-4 bg-white shadow-lg rounded-3 text-center my-4 flex-shrink-0">

        <div th:replace="~{fragments/navigation :: nav}"></div>

        <div onclick="showTranslation()">
            <div class="mb-4">
                <div class="progress" role="progressbar" style="height: 10px;">
                    <div class="progress-bar"
                         th:style="|width: ${progressPercent}%; background-color: ${stateColor};|">
                    </div>
                </div>
            </div>

            <div class="card text-center border-0" onclick="showTranslation()">
                <div class="card-body">

                    <h2 class="card-title fw-bolder mb-0"
                        th:text="${word.lang.name() == 'EN' ? word.english : word.ukrainian}"></h2>

                    <hr class="my-3" />

                    <p id="translation"
                       class="card-text text-primary fs-4 fw-bold"
                       style="visibility: hidden;"
                       th:text="${word.lang.name() == 'EN' ? word.ukrainian : word.english}"></p>

                    <hr class="my-3" />

                    <pre class="card-text text-muted fst-italic"
                       th:text="${word.description}"></pre>
                </div>
            </div>

            <div id="actions" class="d-flex justify-content-center mt-4" style="visibility: hidden;">
                <form th:action="@{/trained}" method="get" id="trainForm"
                      class="d-flex w-100 gap-2">

                    <input type="hidden" name="id" th:value="${word.id}">
                    <input type="hidden" name="success" id="successField" value="">
                    <input type="hidden" name="lang" th:value="${word.lang}">

                    <button type="button"
                            onclick="submitForm(true)"
                            class="btn btn-success btn-lg"
                            style="flex: 4;">
                        <i class="bi bi-check-circle-fill" style="font-size: 1.5rem;"></i>
                    </button>

                    <a id="editButton"
                       th:href="@{/edit(w=${word.english})}"
                       class="btn btn-primary btn-lg"
                       style="visibility: hidden; flex: 2;"
                       title="Редагувати слово">
                        <i class="bi bi-pencil" style="font-size: 1.5rem;"></i>
                    </a>

                    <button type="button"
                            onclick="submitForm(false)"
                            class="btn btn-danger btn-lg"
                            style="flex: 4;">
                        <i class="bi bi-x-circle-fill" style="font-size: 1.5rem;"></i>
                    </button>
                </form>
            </div>

        </div>
    </div>
<script>
function showTranslation() {
    document.getElementById('translation').style.visibility = 'visible';
    document.getElementById('actions').style.visibility = 'visible';
    document.getElementById('editButton').style.visibility = 'visible';
}

function submitForm(success) {
    document.getElementById('successField').value = success;
    document.getElementById('trainForm').submit();
}
</script>
</body>
</html>